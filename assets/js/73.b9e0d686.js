(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1174:function(s,n,t){s.exports=t.p+"assets/img/6.1.ab988137.png"},1261:function(s,n,t){"use strict";t.r(n);var a=t(13),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例"}},[s._v("#")]),s._v(" 例")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("目标")]),s._v(" "),a("ul",[a("li",[s._v("掌握单臂路由配置方法；通过单臂路由实现不同VLAN间互相通信；")])])]),s._v(" "),a("li",[a("p",[s._v("背景")]),s._v(" "),a("ul",[a("li",[s._v("某企业有两个主要部门，技术部和销售部，分处于不同的办公室，为了安全和便于管理对两个部门的主机进行了VLAN的划分，技术部和销售部分处于不同的VLAN，现由于业务的需求需要销售部和技术部的主机能够相互访问，获得相应的资源，两个部门的交换机通过一台路由器进行了连接。")])])]),s._v(" "),a("li",[a("p",[s._v("原理")]),s._v(" "),a("ul",[a("li",[s._v("单臂路由：是为实现VLAN间通信的三层网络设备路由器，它只需要一个以太接口，通过创建子接口可以承担所有VLAN的网关，而在不同的VLAN间转发数据。")])])]),s._v(" "),a("li",[a("p",[s._v("步骤")]),s._v(" "),a("ul",[a("li",[s._v("新建packet tracer拓扑图（如图）")]),s._v(" "),a("li",[s._v("当交换机设置成两个vlan时，逻辑上已经成为两个网络，广播被隔离了。两个vlan的网络要通信，必须通过路由器，如果接入路由器的，个物理端口，则必须有两个子按口分别与两个vlan对应，同时还要求与路由器相联的交换机的端口f/1要设置为trunk，因为这个口要通过两个vlan的数据包。")]),s._v(" "),a("li",[s._v("检查设置情况，应该能正确的看到van和trunk信息。")]),s._v(" "),a("li",[s._v("计算机的网关分别指向路由器的子接口。")]),s._v(" "),a("li",[s._v("配置子接口，开启路由器物理接口。")]),s._v(" "),a("li",[s._v("默认封装为dot1q协议。")]),s._v(" "),a("li",[s._v("配置路由器子接口ip地址。")])])])]),s._v(" "),a("h2",{attrs:{id:"拓扑与主机ip配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拓扑与主机ip配置"}},[s._v("#")]),s._v(" 拓扑与主机IP配置")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1174),alt:"6.1"}})]),s._v(" "),a("h2",{attrs:{id:"两层交换机配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两层交换机配置"}},[s._v("#")]),s._v(" 两层交换机配置")]),s._v(" "),a("ul",[a("li",[s._v("划分vlan与更改工作模式")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Switch>en\nSwitch#conf t\t\t\t\t\t\t\t\t\t!进入全局配置\nEnter configuration commands, one per line.  End with CNTL/Z.\nSwitch(config)#vlan 2\nSwitch(config-vlan)#exit\nSwitch(config)#vlan 3\nSwitch(config-vlan)#exit\nSwitch(config)#in fa 0/2\nSwitch(config-if)#switchport access vlan 2\t\t!将fa0/2划分到vlan2\nSwitch(config-if)#exit\nSwitch(config)#int fa 0/3\nSwitch(config-if)#switchport access vlan 3\t\t!将fa0/3划分到vlan3\nSwitch(config-if)#int fa 0/1\nSwitch(config-if)#switchport mode trunk \t\t!将fa0/1工作模式改为trunk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"路由器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由器配置"}},[s._v("#")]),s._v(" 路由器配置")]),s._v(" "),a("ul",[a("li",[s._v("启用端口")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Would you like to enter the initial configuration dialog? [yes/no]: n\n\n\nPress RETURN to get started!\n\n\n\nRouter>en\nRouter#conf t\nEnter configuration commands, one per line.  End with CNTL/Z.\nRouter(config)#int fa 0/0\nRouter(config-if)#no shut\t\t!启用 fa0/0端口\n\nRouter(config-if)#\n%LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up\n\n%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up\n\nRouter(config-if)#exit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("ul",[a("li",[s._v("子接口配置\n"),a("ul",[a("li",[s._v("注：此处接口地址即主机网关")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Router(config)#interface fastEthernet 0/0.1\t\t\t\t\t!进入0/0.1子接口\nRouter(config-subif)#\n%LINK-5-CHANGED: Interface FastEthernet0/0.1, changed state to up\n\n%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.1, changed state to up\n\nRouter(config-subif)#encapsulation dot1Q 2\t\t\t\t\t!更改封装模式为dot1Q 末尾参数为vlan号？\nRouter(config-subif)#ip address 192.168.1.1 255.255.255.0\t!设置IP地址\nRouter(config-subif)#exit\n\n\nRouter(config)#int fa 0/0.2\t\t\t\t\t\t\t\t\t!进入0/0.2子接口\nRouter(config-subif)#\n%LINK-5-CHANGED: Interface FastEthernet0/0.2, changed state to up\n\n%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.2, changed state to up\n\nRouter(config-subif)#encapsulation dot1Q 3\t\t\t\t\t!更改封装模式为dot1Q 末尾参数为vlan号？\nRouter(config-subif)#ip add\nRouter(config-subif)#ip address 192.168.2.1 255.255.255.0\t!设置IP地址\nRouter(config-subif)#end\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("ul",[a("li",[s._v("查看路由表\n"),a("ul",[a("li",[s._v("可以看到直连路由")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Router#show ip route \nCodes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP\n       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area\n       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2\n       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP\n       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area\n       * - candidate default, U - per-user static route, o - ODR\n       P - periodic downloaded static route\n\nGateway of last resort is not set\n\n     192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks\nC       192.168.1.0/24 is directly connected, FastEthernet0/0.1\nL       192.168.1.1/32 is directly connected, FastEthernet0/0.1\n     192.168.2.0/24 is variably subnetted, 2 subnets, 2 masks\nC       192.168.2.0/24 is directly connected, FastEthernet0/0.2\nL       192.168.2.1/32 is directly connected, FastEthernet0/0.2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"测试能否通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试能否通信"}},[s._v("#")]),s._v(" 测试能否通信")]),s._v(" "),a("ul",[a("li",[s._v("从 PC0 ping 网关")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\>ping 192.168.1.1\n\nPinging 192.168.1.1 with 32 bytes of data:\n\nReply from 192.168.1.1: bytes=32 time<1ms TTL=255\nReply from 192.168.1.1: bytes=32 time<1ms TTL=255\nReply from 192.168.1.1: bytes=32 time<1ms TTL=255\nReply from 192.168.1.1: bytes=32 time<1ms TTL=255\n\nPing statistics for 192.168.1.1:\n    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),\nApproximate round trip times in milli-seconds:\n    Minimum = 0ms, Maximum = 0ms, Average = 0ms\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("从 PC0 ping PC1")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Pinging 192.168.2.2 with 32 bytes of data:\n\nRequest timed out.\nReply from 192.168.2.2: bytes=32 time<1ms TTL=127\nReply from 192.168.2.2: bytes=32 time<1ms TTL=127\nReply from 192.168.2.2: bytes=32 time<1ms TTL=127\n\nPing statistics for 192.168.2.2:\n    Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),\nApproximate round trip times in milli-seconds:\n    Minimum = 0ms, Maximum = 0ms, Average = 0ms\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);