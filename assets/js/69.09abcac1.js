(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1132:function(n,s,a){n.exports=a.p+"assets/img/3.1.162e4f42.png"},1219:function(n,s,a){"use strict";a.r(s);var t=a(13),i=Object(t.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("ul",[t("li",[n._v("背景")])]),n._v(" "),t("p",[n._v("​        某企业有两个主要部门，技术部和销售部，分处于不同的办公室，为了安全和便于管理对两个部门的主机进行了VLAN的划分，技术部和销售部分处于不同的VLAN。现由于业务的需求需要销售部和技术部的主机能够相互访问，获得相应的资源，两个部门的交换机通过一台三层交换机进行了连接。")]),n._v(" "),t("ul",[t("li",[n._v("原理")])]),n._v(" "),t("p",[n._v("​        三层交换机具备网络层的功能，实现VLAN相互访问的原理是：利用三层交换机的路由功能，通过识别数据包的IP地址，查找路由表进行选路转发。三层交换机利用直连路由可以实现不同VLAN之间的互相访问。三层交换机给接口配置IP地址，采用SVI（交换虚拟接口）的方式实现VLAN间互连.SVI是指为交换机中的VLAN创建虚拟接口，并且配置IP地址。")]),n._v(" "),t("h2",{attrs:{id:"拓扑图与主机配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拓扑图与主机配置"}},[n._v("#")]),n._v(" 拓扑图与主机配置")]),n._v(" "),t("p",[t("img",{attrs:{src:a(1132),alt:"3.1"}})]),n._v(" "),t("h2",{attrs:{id:"配置-双层交换机-2960"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-双层交换机-2960"}},[n._v("#")]),n._v(" 配置 双层交换机(2960)")]),n._v(" "),t("ul",[t("li",[n._v("划分VLAN")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("Switch>en\t\t\t\t\t\t\t\t\t\t!特权模式\nSwitch#conf t\t\t\t\t\t\t\t\t\t!全局配置\nEnter configuration commands, one per line.  End with CNTL/Z.\nSwitch(config)#vlan 2\t\t\t\t\t\t\t!划分vlan2\nSwitch(config-vlan)#exit\nSwitch(config)#vlan 3\t\t\t\t\t\t\t!划分vlan3\nSwitch(config-vlan)#exit\nSwitch(config)#int fa 0/2\t\t\t\t\t\t!配置0/2口\nSwitch(config-if)#switchport  access vlan 2\t\t!划分到vlan2\nSwitch(config-if)#int fa 0/3\t\t\t\t\t!配置0/3口\nSwitch(config-if)#sw\nSwitch(config-if)#switchport access vlan 3\t\t!划分到vlan3\nSwitch(config-if)#int fa 0/1\t\t\t\t\t!配置0/1口\nSwitch(config-if)#switchport mode trunk \t\t!切换工作模式\n\nSwitch(config-if)#\n%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to down\n\n%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up\n\n! 查看Vlan表\nSwitch#show vlan\n\nVLAN Name                             Status    Ports\n---- -------------------------------- --------- -------------------------------\n1    default                          active    Fa0/4, Fa0/5, Fa0/6, Fa0/7\n                                                Fa0/8, Fa0/9, Fa0/10, Fa0/11\n                                                Fa0/12, Fa0/13, Fa0/14, Fa0/15\n                                                Fa0/16, Fa0/17, Fa0/18, Fa0/19\n                                                Fa0/20, Fa0/21, Fa0/22, Fa0/23\n                                                Fa0/24, Gig0/1, Gig0/2\n2    VLAN0002                         active    Fa0/2\n3    VLAN0003                         active    Fa0/3\n1002 fddi-default                     active    \n1003 token-ring-default               active    \n1004 fddinet-default                  active    \n1005 trnet-default                    active    \n\nVLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2\n---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------\n1    enet  100001     1500  -      -      -        -    -        0      0\n2    enet  100002     1500  -      -      -        -    -        0      0\n3    enet  100003     1500  -      -      -        -    -        0      0\n1002 fddi  101002     1500  -      -      -        -    -        0      0   \n --More-- \n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br"),t("span",{staticClass:"line-number"},[n._v("26")]),t("br"),t("span",{staticClass:"line-number"},[n._v("27")]),t("br"),t("span",{staticClass:"line-number"},[n._v("28")]),t("br"),t("span",{staticClass:"line-number"},[n._v("29")]),t("br"),t("span",{staticClass:"line-number"},[n._v("30")]),t("br"),t("span",{staticClass:"line-number"},[n._v("31")]),t("br"),t("span",{staticClass:"line-number"},[n._v("32")]),t("br"),t("span",{staticClass:"line-number"},[n._v("33")]),t("br"),t("span",{staticClass:"line-number"},[n._v("34")]),t("br"),t("span",{staticClass:"line-number"},[n._v("35")]),t("br"),t("span",{staticClass:"line-number"},[n._v("36")]),t("br"),t("span",{staticClass:"line-number"},[n._v("37")]),t("br"),t("span",{staticClass:"line-number"},[n._v("38")]),t("br"),t("span",{staticClass:"line-number"},[n._v("39")]),t("br"),t("span",{staticClass:"line-number"},[n._v("40")]),t("br"),t("span",{staticClass:"line-number"},[n._v("41")]),t("br"),t("span",{staticClass:"line-number"},[n._v("42")]),t("br"),t("span",{staticClass:"line-number"},[n._v("43")]),t("br"),t("span",{staticClass:"line-number"},[n._v("44")]),t("br"),t("span",{staticClass:"line-number"},[n._v("45")]),t("br")])]),t("h2",{attrs:{id:"配置-三层交换机-3560"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-三层交换机-3560"}},[n._v("#")]),n._v(" 配置 三层交换机(3560)")]),n._v(" "),t("ul",[t("li",[n._v("划分VLAN")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('Switch>en\t\t\t\t\t!权限模式\nSwitch#conf t\t\t\t\t!全局配置\nEnter configuration commands, one per line.  End with CNTL/Z.\nSwitch(config)#vlan 2\t\t!划分vlan2\nSwitch(config-vlan)#exit\nSwitch(config)#vlan 3\t\t!划分vlan3\nSwitch(config-vlan)#exit\nSwitch(config)#int fa 0/1\t!配置f0/1口\n\nSwitch(config-if)#switchport mode trunk \nCommand rejected: An interface whose trunk encapsulation is "Auto" can not be configured to "trunk" mode.\n! 出现上述错误，先给端口封装dot1Q协议，再切换为trunk模式，命令如下\nSwitch(config-if)#switchport trunk encapsulation dot1q\n! 或先转换为acc模式，再转为trunk模式，命令如下\nSwitch(config-if)#switchport mode access\n\nSwitch(config-if)#switchport mode trunk\nSwitch(config-if)#exit\nSwitch(config)#ip routing\t!启用交换机的路由功能\n')])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br")])]),t("ul",[t("li",[n._v("创建VLAN2、VLAN3的虚接口，配置其IP地址")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("Switch(config)#int vlan 2\nSwitch(config-if)#ip address 192.168.1.1 255.255.255.0\nSwitch(config-if)#no shutdown\nSwitch(config-if)#exit\nSwitch(config)#int vlan 3\nSwitch(config-if)#ip address 192.168.2.1 255.255.255.0\nSwitch(config-if)#no shut\nSwitch(config-if)#exit\nSwitch(config)#end\nSwitch#\n%SYS-5-CONFIG_I: Configured from console by console\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br")])]),t("ul",[t("li",[n._v("查看路由表，可以看到两条直连线路")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("Switch#show ip rou\nCodes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP\n       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area\n       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2\n       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP\n       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area\n       * - candidate default, U - per-user static route, o - ODR\n       P - periodic downloaded static route\n\nGateway of last resort is not set\n\nC    192.168.1.0/24 is directly connected, Vlan2\nC    192.168.2.0/24 is directly connected, Vlan3\n\nSwitch#\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br")])]),t("ul",[t("li",[n._v("将f0/2划分到vlan2")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("Switch(config)#int fa 0/2\nSwitch(config-if)#switchport access vlan 2\nSwitch(config-if)#exit\nSwitch(config)# end\nSwitch#show vlan\n\nVLAN Name                             Status    Ports\n---- -------------------------------- --------- -------------------------------\n1    default                          active    Fa0/3, Fa0/4, Fa0/5, Fa0/6\n                                                Fa0/7, Fa0/8, Fa0/9, Fa0/10\n                                                Fa0/11, Fa0/12, Fa0/13, Fa0/14\n                                                Fa0/15, Fa0/16, Fa0/17, Fa0/18\n                                                Fa0/19, Fa0/20, Fa0/21, Fa0/22\n                                                Fa0/23, Fa0/24, Gig0/1, Gig0/2\n2    VLAN0002                         active    Fa0/2\n3    VLAN0003                         active    \n1002 fddi-default                     active    \n1003 token-ring-default               active    \n1004 fddinet-default                  active    \n1005 trnet-default                    active    \n\nVLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2\n---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------\n1    enet  100001     1500  -      -      -        -    -        0      0\n2    enet  100002     1500  -      -      -        -    -        0      0\n3    enet  100003     1500  -      -      -        -    -        0      0\n1002 fddi  101002     1500  -      -      -        -    -        0      0   \n --More-- \n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br"),t("span",{staticClass:"line-number"},[n._v("26")]),t("br"),t("span",{staticClass:"line-number"},[n._v("27")]),t("br"),t("span",{staticClass:"line-number"},[n._v("28")]),t("br")])]),t("h2",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[n._v("#")]),n._v(" 测试")]),n._v(" "),t("ul",[t("li",[n._v("PC2 (192.168.1.3) 分别 ping PC0 (192.168.1.2)、PC1 (192.168.2.2)")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("C:\\>ping 192.168.1.2\n\nPinging 192.168.1.2 with 32 bytes of data:\n\nReply from 192.168.1.2: bytes=32 time<1ms TTL=128\n\nPing statistics for 192.168.1.2:\n    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),\nApproximate round trip times in milli-seconds:\n    Minimum = 0ms, Maximum = 0ms, Average = 0ms\n\nC:\\>ping 192.168.2.2\n\nPinging 192.168.2.2 with 32 bytes of data:\n\nReply from 192.168.2.2: bytes=32 time<1ms TTL=127\n\nPing statistics for 192.168.2.2:\n    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),\nApproximate round trip times in milli-seconds:\n    Minimum = 0ms, Maximum = 0ms, Average = 0ms\n\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br")])])])}),[],!1,null,null,null);s.default=i.exports}}]);